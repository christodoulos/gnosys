<div class="flex flex-col space-y-4">
  <ng-container *ngIf="(strengthenJobs$ | async)?.length">
    <div class="flex flex-col" *ngIf="strengthenJobs$ | async as jobs">
      <div class="flex text-lg space-x-2 items-center">
        <span>Strengthen Results</span>
        <svg-icon
          (click)="refresh()"
          class="cursor-pointer {{
            (isloading$ | async) ? 'animate-spin' : ''
          }}"
          [key]="'refresh'"
        ></svg-icon>
      </div>
      <table class="table-auto text-sm">
        <thead>
          <tr>
            <th class="text-left whitespace-nowrap">Job Name</th>
            <th class="text-left whitespace-nowrap">Job Progress</th>
            <th class="text-left whitespace-nowrap">Job Results</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let job of jobs" class="border">
            <td class="whitespace-nowrap">
              {{ job.data.name }}
            </td>
            <td>{{ job.progress }}</td>
            <td>
              <button
                *ngIf="job.finishedOn"
                class="bg-indigo-500 p-1 mt-1 cursor-pointer text-white font-semibold flex space-x-2 items-center"
                (click)="downloadFile(job.id, job.data.name)"
              >
                <svg-icon [key]="'download'"></svg-icon> <span>Results</span>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </ng-container>

  <ng-container *ngIf="(fireJobs$ | async)?.length">
    <div class="flex flex-col" *ngIf="fireJobs$ | async as jobs">
      <div class="flex text-lg space-x-2 items-center">
        <span>Fire Results</span>
        <svg-icon
          (click)="refresh()"
          class="cursor-pointer {{
            (isloading$ | async) ? 'animate-spin' : ''
          }}"
          [key]="'refresh'"
        ></svg-icon>
      </div>
      <table class="table-auto text-sm">
        <thead>
          <tr>
            <th class="text-left whitespace-nowrap">Job Name</th>
            <th class="text-left whitespace-nowrap">Job Progress</th>
            <th class="text-left whitespace-nowrap">Job Results</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let job of jobs" class="border">
            <td class="whitespace-nowrap">
              {{ job.data.name }}
            </td>
            <td>{{ job.progress }}</td>
            <td>
              <button
                *ngIf="job.finishedOn"
                class="bg-indigo-500 p-1 mt-1 cursor-pointer text-white font-semibold flex space-x-2 items-center"
                (click)="downloadFire(job.id, job.data.name)"
              >
                <svg-icon [key]="'download'"></svg-icon> <span>Results</span>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </ng-container>
</div>
<!-- <div class="flex items-center text-lg p-2 mb-2">
  <span class="mr-2">Strengthen Jobs</span>
  <svg-icon
    (click)="refresh()"
    class="cursor-pointer {{ (isloading$ | async) ? 'animate-spin' : '' }}"
    [key]="'refresh'"
  ></svg-icon>
</div>

<ag-grid-angular
  [columnDefs]="columnDefs"
  [rowData]="results"
  [domLayout]="'autoHeight'"
  class="ag-theme-alpine"
></ag-grid-angular>

<ul class="p-2 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
  <li *ngFor="let case of results" class="col-span-1 flex flex-col bg-white">
    <div class="p-2 flex flex-col text-sm">
      <h3 class="text-gray-900 font-medium text-lg truncate">
        {{ case.name }}
      </h3>
      <p>
        Job ID: <span class="font-semibold">{{ case.jobID }}</span>
      </p>
      <p>
        Submited On:
        <span class="font-semibold">{{ case.timestamp | date: 'short' }}</span>
      </p>
      <p>
        Progress:
        <span *ngIf="case.progress" class="font-semibold"
          >{{ case.progress }}%</span
        ><span *ngIf="!case.progress" class="font-semibold">Pending ...</span>
      </p>
      <p *ngIf="case.finishedOn">
        Finished On:
        <span class="font-semibold">{{ case.finishedOn | date: 'short' }}</span>
        <button
          class="bg-indigo-500 p-1 mt-1 cursor-pointer text-white font-semibold flex space-x-2 items-center"
          (click)="downloadFile(case.jobID, case.name)"
        >
          <svg-icon [key]="'download'"></svg-icon> <span>Results</span>
        </button>
      </p>
    </div>
  </li>
</ul>

<div class="flex items-center text-lg p-2 mb-2">
  <span class="mr-2">Fire Jobs</span>
  <svg-icon
    (click)="refresh()"
    class="cursor-pointer {{ (isloading$ | async) ? 'animate-spin' : '' }}"
    [key]="'refresh'"
  ></svg-icon>
</div>

<ul class="p-2 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
  <li
    *ngFor="let case of fireResults"
    class="col-span-1 flex flex-col bg-white"
  >
    <div class="p-2 flex flex-col text-sm">
      <h3 class="text-gray-900 font-medium text-lg truncate">
        {{ case.data.name }}
      </h3>
      <p>
        Job ID: <span class="font-semibold">{{ case.id }}</span>
      </p>
      <p>
        Submited On:
        <span class="font-semibold">{{ case.timestamp | date: 'short' }}</span>
      </p>
      <p>
        Progress:
        <span *ngIf="case.progress" class="font-semibold"
          >{{ case.progress }}%</span
        ><span *ngIf="!case.progress" class="font-semibold">Pending ...</span>
      </p>
      <p *ngIf="case.finishedOn">
        Finished On:
        <span class="font-semibold">{{ case.finishedOn | date: 'short' }}</span>
        <button
          class="bg-indigo-500 p-1 mt-1 cursor-pointer text-white font-semibold flex space-x-2 items-center"
          (click)="downloadFire(case.id, case.data.name)"
        >
          <svg-icon [key]="'download'"></svg-icon> <span>Results</span>
        </button>
      </p>
    </div>
  </li>
</ul> -->
